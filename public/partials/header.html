<header class="navbar" role="banner">
  <style>
    .site-header{display:grid;grid-template-columns:minmax(140px,auto) 1fr auto;align-items:center;min-height:68px;padding:4px 20px;gap:0}
    .brand{display:flex;align-items:center;justify-self:start;min-width:140px;text-decoration:none;margin-right:0}
    .brand-logo{height:64px;width:auto;object-fit:contain;display:block}
    .brand-logo--blend{mix-blend-mode:multiply;filter:contrast(1.08) brightness(1.02)}
    :root[data-theme="dark"] .brand-logo--blend{mix-blend-mode:screen;filter:contrast(1.05) brightness(1.06)}
    .main-nav{display:flex;align-items:center;justify-self:start;gap:16px;margin-left:0;min-width:0;flex-wrap:wrap}
    .main-nav a{text-decoration:none;padding:6px 8px;border-radius:6px;font-weight:600;font-size:15px;color:var(--muted);white-space:nowrap;transition:background .2s,color .2s}
    .main-nav a:hover{color:var(--text);background:color-mix(in oklab,var(--primary) 10%, transparent)}
    .main-nav a.active{background:color-mix(in oklab,var(--primary) 14%, transparent);color:var(--primary);box-shadow:inset 0 -2px 0 color-mix(in oklab,var(--primary) 50%, transparent)}
    .header-actions{display:flex;align-items:center;gap:12px;justify-self:end;white-space:nowrap}
    .cart-link{text-decoration:none;padding:6px 12px;border-radius:20px;background:rgba(0,0,0,.05)}
    .cart-badge{background:#ff3b30;color:#fff;border-radius:999px;padding:2px 6px;font-size:12px;margin-left:4px}
    .header-actions a.active{background:color-mix(in oklab,var(--primary) 14%, transparent);color:var(--primary);box-shadow:inset 0 -2px 0 color-mix(in oklab,var(--primary) 50%, transparent);border-radius:6px;padding:6px 8px}
    .theme-toggle{display:inline-flex;align-items:center;justify-content:center;height:36px;min-width:36px;padding:0 10px;border-radius:10px;border:1px solid var(--border);background:var(--panel);cursor:pointer;transition:.2s}
    .theme-toggle:hover{background:rgba(11,99,246,.06);border-color:rgba(11,99,246,.35)}
    .theme-toggle .icon{font-size:16px;line-height:1}
    .navbar{position:fixed;top:0;left:0;right:0;z-index:1200;background:#fff;border-bottom:1px solid var(--border)}
    :root[data-theme="dark"] .navbar{background:#1e293b}
    @media (max-width:1400px){.main-nav{gap:14px}.main-nav a{font-size:14px;padding:5px 7px}}
    @media (max-width:1150px){.main-nav{gap:10px}.main-nav a{font-size:13px;padding:4px 6px}}
    @media (max-width:900px){.main-nav{flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden;scrollbar-width:none}.main-nav::-webkit-scrollbar{display:none}.brand-logo{height:56px}.site-header{min-height:56px;padding:2px 14px}}
  </style>

  <div class="container site-header">
    <!-- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ -->
    <a class="brand" href="/" aria-label="‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å PFP">
      <img src="/images/logo2.png" alt="PFP Logo"
           class="brand-logo brand-logo--blend"
           onerror="this.onerror=null;this.src='/images/logo3.jpg';">
    </a>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π -->
    <nav class="main-nav" role="navigation" aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å">
      <a href="/"           data-path="/">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <a href="/products"   data-path="/products">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
      <a href="/portfolio"  data-path="/portfolio">‡∏ú‡∏•‡∏á‡∏≤‡∏ô</a>
      <a href="/about"      data-path="/about">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
      <a href="/services"   data-path="/services">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</a>
      <a href="/contact"    data-path="/contact">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
    </nav>

    <!-- Actions (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô HTML ‡∏•‡πâ‡∏ß‡∏ô) -->
    <div class="header-actions">
      <a href="/auth/login">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
      <a href="/cart" class="cart-link">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ <span class="cart-badge" id="cartCount">0</span></a>
      <button id="themeToggle" class="theme-toggle" type="button" aria-label="Toggle theme">
        <span class="icon" id="themeIcon">üåô</span>
      </button>
    </div>
  </div>

  <script>
    // Theme
    (function(){
      const THEME_KEY='pfp.theme';
      const html=document.documentElement;
      const btn=document.getElementById('themeToggle');
      const icon=document.getElementById('themeIcon');
      function sync(){ icon.textContent = html.getAttribute('data-theme')==='dark' ? '‚òÄÔ∏è' : 'üåô'; }
      (function init(){
        const saved=localStorage.getItem(THEME_KEY);
        if(saved==='light'||saved==='dark'){
          html.setAttribute('data-theme', saved);
        }else{
          const prefersDark=window.matchMedia?.('(prefers-color-scheme: dark)').matches;
          html.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
        }
        sync();
      })();
      btn && btn.addEventListener('click', ()=>{
        const next = html.getAttribute('data-theme')==='dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', next);
        localStorage.setItem(THEME_KEY, next);
        sync();
      });
    })();

    // ‡∏ï‡∏±‡πâ‡∏á active menu ‡∏ï‡∏≤‡∏° URL ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
    (function(){
      const p = location.pathname;
      document.querySelectorAll('.main-nav a').forEach(a=>{
        const base = a.dataset.path;
        if (base === '/' ? p==='/' : p.startsWith(base)) a.classList.add('active');
      });
    })();
  </script>
</header>
